<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-aabb-collider-component/dist/aframe-aabb-collider-component.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script src="./components/atomlabel.js"></script>
    <script src="./components/menulabel.js"></script>
    <script src="./components/shellbonds.js"></script>
    <script src="./components/shellatoms.js"></script>
  </head>
  <body>
    <script>
        AFRAME.registerPrimitive('a-atom', {
            defaultComponents: {
                geometry: {primitive: 'sphere', radius: '0.3'},
                material: {color: ''}
            },

            mappings: {
                radius: 'geometry.radius',
                color: 'material.color',
                opacity: 'material.opacity'
            }
        });

        AFRAME.registerPrimitive('a-bond', {
            defaultComponents: {
                geometry: {primitive: 'cylinder', radius: '0.08', height: '1'},
                material: {color: ''}
            },

            mappings: {
                color: 'material.color',
                opacity: 'material.opacity'
            }
        });
    </script>

    <a-scene id="scene" environment="preset: yavapai; lighting: point; dressing: none; groundColor: #1B1B1B; groundColor2: #344E5B;
        skyType: color; skyColor: #1B1B1B">

        <a-box id="mainmenu" position="0 1 -3.5" color="#5F96B2" depth="0.1" width="5" height="4">
            <a-text id="title" class="beginbutton" value="VR OCHEM" align="center" width="18" position="-0.03 1 0.06" color="#ff918d"></a-text>
            <a-text id="title" class="beginbutton" value="VR OCHEM" align="center" width="18" position="0.03 1.04 0.06" color="#ffd700"></a-text>
            <a-text id="title" class="beginbutton" value="VR OCHEM" align="center" width="18" position="0 1.02 0.06" color="#000"></a-text>
            <!-- <a-text id="title" class="beginbutton" value="BETA" align="center" width="3" position="2.3 -0.9 0.06"
                color="#000"></a-text> -->
            <a-box position="0 0 0.06" color="#ffd700" depth="0.01" width="1.1" height="0.6">
                <a-text id="begin" class="beginbutton" value="Begin" align="center" geometry="primitive: plane; height: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
            </a-box>
        </a-box>

        <a-box id="editmenu" position="2 1.5 -3.5" color="#5F96B2" depth="0.1" width="2" height="3" visible="false">
            <a-box position="0 0.8 0.06" color="#ffd700" depth="0.01" width="1.1" height="0.6">
                <a-text id="add" class="editbutton" value="Add" align="center" geometry="primitive: plane; height: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
            </a-box>
            <a-box position="0 0 0.06" color="#ffd700" depth="0.01" width="1.1" height="0.6">
                <a-text id="delete" class="editbutton" value="Delete" align="center" geometry="primitive: plane; height: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
            </a-box>
            <a-box position="0 -0.8 0.06" color="#ffd700" depth="0.01" width="1.1" height="0.6">
                <a-text id="exit" class="editbutton" value="Exit" align="center" geometry="primitive: plane; height: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
            </a-box>
        </a-box>

        <a-box id="atommenu" position="2 3 -3.5" color="#5F96B2" depth="0.1" width="3" height="2" visible="false">
            <a-box position="-1 0.5 0.06" color="#ffd700" depth="0.01" width="0.6" height="0.6">
                <a-text id="carbon" class="atombutton" value="C" align="center" geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
                </a-box>
            <a-box position="0 0.5 0.06" color="#ffd700" depth="0.01" width="0.6" height="0.6">
                <a-text id="nitrogen" class="atombutton" value="N" align="center" geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
                </a-box>
            <a-box position="1 0.5 0.06" color="#ffd700" depth="0.01" width="0.6" height="0.6">
                <a-text id="oxygen" class="atombutton" value="O" align="center" geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
                </a-box>
            <a-box position="-1 -0.5 0.06" color="#ffd700" depth="0.01" width="0.6" height="0.6">
                <a-text id="hydrogen" class="atombutton" value="H" align="center" geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
                </a-box>
            <a-box position="0 -0.5 0.06" color="#ffd700" depth="0.01" width="0.6" height="0.6">
                <a-text id="chlorine" class="atombutton" value="Cl" align="center" geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
                </a-box>
            <a-box position="1 -0.5 0.06" color="#ffd700" depth="0.01" width="0.6" height="0.6">
                <a-text id="bromine" class="atombutton" value="Br" align="center" geometry="primitive: plane; height: 0.5; width: 0.5"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
                </a-box>
        </a-box>

        <a-box id="donemenu" position="2 1 -3.5" color="#5F96B2" depth="0.1" width="2" height="1" visible="false">
            <a-box position="0 0 0.06" color="#ffd700" depth="0.01" width="1.1" height="0.5">
                <a-text id="done" class="donebutton" value="Done" align="center" geometry="primitive: plane; height: 0.4"
                    position="0 0 0.01" color="#000" material="color: #ff918d"></a-text>
            </a-box>
        </a-box>

        <a-camera position="0 1 0">
            <a-entity cursor
                geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
                position="0 0 -1"
                material="color: black"
                raycaster="objects: .beginbutton"></a-entity>
        </a-camera>
    </a-scene>

    <script>
        var cursor = document.querySelector('a-scene a-camera a-entity');
        var scene = document.querySelector('#scene');
        var editmenu = document.querySelector('a-scene #editmenu');
        var atommenu = document.querySelector('a-scene #atommenu');
        var donemenu = document.querySelector('a-scene #donemenu');
        var mainmenu = document.querySelector('a-scene #mainmenu');
        var carbon = document.querySelector('#carbon');
        var nitrogen = document.querySelector('#nitrogen');
        var oxygen = document.querySelector('#oxygen');
        var hydrogen = document.querySelector('#hydrogen');
        var chlorine = document.querySelector('#chlorine');
        var bromine = document.querySelector('#bromine');

        document.querySelector('#begin').addEventListener('click', function () {
            mainmenu.setAttribute('visible', false);
            editmenu.setAttribute('visible', true);
            //startatom.setAttribute('visible', true);

            var atom = document.createElement('a-atom');
            atom.setAttribute('position', "-1 1.75 -2.5");
            atom.setAttribute('atomlabel', {text: 'C'});
            atom.setAttribute('color', '#DCDCDC');
            atom.setAttribute('class', 'placedatom');
            atom.setAttribute('shellbonds', '');
            scene.appendChild(atom);

            cursor.setAttribute('raycaster', {objects: ['.editbutton']});
        });
        document.querySelector('#add').addEventListener('click', function () {
            editmenu.setAttribute('visible', false);
            donemenu.setAttribute('visible', true);
            atommenu.setAttribute('visible', true);
            carbon.setAttribute('material', 'color', '#ffd700');
            nitrogen.setAttribute('material', 'color', '#ff918d');
            oxygen.setAttribute('material', 'color', '#ff918d');
            hydrogen.setAttribute('material', 'color', '#ff918d');
            chlorine.setAttribute('material', 'color', '#ff918d');
            bromine.setAttribute('material', 'color', '#ff918d');
            cursor.addState('carbon');
            cursor.removeState('nitrogen');
            cursor.removeState('oxygen');
            cursor.removeState('hydrogen');
            cursor.removeState('chlorine');
            cursor.removeState('bromine');
            cursor.setAttribute('raycaster', {objects: ['.donebutton', '.atombutton', '.shell-atom', '.shell-bond']});
        });
        carbon.addEventListener('click', function () {
            carbon.setAttribute('material', 'color', '#ffd700');
            nitrogen.setAttribute('material', 'color', '#ff918d');
            oxygen.setAttribute('material', 'color', '#ff918d');
            hydrogen.setAttribute('material', 'color', '#ff918d');
            chlorine.setAttribute('material', 'color', '#ff918d');
            bromine.setAttribute('material', 'color', '#ff918d');
            cursor.addState('carbon');
            cursor.removeState('nitrogen');
            cursor.removeState('oxygen');
            cursor.removeState('hydrogen');
            cursor.removeState('chlorine');
            cursor.removeState('bromine');
        });
        nitrogen.addEventListener('click', function () {
            carbon.setAttribute('material', 'color', '#ff918d');
            nitrogen.setAttribute('material', 'color', '#ffd700');
            oxygen.setAttribute('material', 'color', '#ff918d');
            hydrogen.setAttribute('material', 'color', '#ff918d');
            chlorine.setAttribute('material', 'color', '#ff918d');
            bromine.setAttribute('material', 'color', '#ff918d');
            cursor.removeState('carbon');
            cursor.addState('nitrogen');
            cursor.removeState('oxygen');
            cursor.removeState('hydrogen');
            cursor.removeState('chlorine');
            cursor.removeState('bromine');
        });
        oxygen.addEventListener('click', function () {
            carbon.setAttribute('material', 'color', '#ff918d');
            nitrogen.setAttribute('material', 'color', '#ff918d');
            oxygen.setAttribute('material', 'color', '#ffd700');
            hydrogen.setAttribute('material', 'color', '#ff918d');
            chlorine.setAttribute('material', 'color', '#ff918d');
            bromine.setAttribute('material', 'color', '#ff918d');
            cursor.removeState('carbon');
            cursor.removeState('nitrogen');
            cursor.addState('oxygen');
            cursor.removeState('hydrogen');
            cursor.removeState('chlorine');
            cursor.removeState('bromine');
        });
        hydrogen.addEventListener('click', function () {
            carbon.setAttribute('material', 'color', '#ff918d');
            nitrogen.setAttribute('material', 'color', '#ff918d');
            oxygen.setAttribute('material', 'color', '#ff918d');
            hydrogen.setAttribute('material', 'color', '#ffd700');
            chlorine.setAttribute('material', 'color', '#ff918d');
            bromine.setAttribute('material', 'color', '#ff918d');
            cursor.removeState('carbon');
            cursor.removeState('nitrogen');
            cursor.removeState('oxygen');
            cursor.addState('hydrogen');
            cursor.removeState('chlorine');
            cursor.removeState('bromine');
        });
        chlorine.addEventListener('click', function () {
            carbon.setAttribute('material', 'color', '#ff918d');
            nitrogen.setAttribute('material', 'color', '#ff918d');
            oxygen.setAttribute('material', 'color', '#ff918d');
            hydrogen.setAttribute('material', 'color', '#ff918d');
            chlorine.setAttribute('material', 'color', '#ffd700');
            bromine.setAttribute('material', 'color', '#ff918d');
            cursor.removeState('carbon');
            cursor.removeState('nitrogen');
            cursor.removeState('oxygen');
            cursor.removeState('hydrogen');
            cursor.addState('chlorine');
            cursor.removeState('bromine');
        });
        bromine.addEventListener('click', function () {
            carbon.setAttribute('material', 'color', '#ff918d');
            nitrogen.setAttribute('material', 'color', '#ff918d');
            oxygen.setAttribute('material', 'color', '#ff918d');
            hydrogen.setAttribute('material', 'color', '#ff918d');
            chlorine.setAttribute('material', 'color', '#ff918d');
            bromine.setAttribute('material', 'color', '#ffd700');
            cursor.removeState('carbon');
            cursor.removeState('nitrogen');
            cursor.removeState('oxygen');
            cursor.removeState('hydrogen');
            cursor.removeState('chlorine');
            cursor.addState('bromine');
        });
        document.querySelector('#delete').addEventListener('click', function () {
            editmenu.setAttribute('visible', false);
            donemenu.setAttribute('visible', true);
            cursor.addState('delete');
            cursor.setAttribute('raycaster', {objects: ['.donebutton', '.placedatom', '.placedbond']});
        });
        document.querySelector('#done').addEventListener('click', function () {
            editmenu.setAttribute('visible', true);
            donemenu.setAttribute('visible', false);
            atommenu.setAttribute('visible', false);
            cursor.removeState('delete');
            cursor.setAttribute('raycaster', {objects: '.editbutton'});
        });
        document.querySelector('#exit').addEventListener('click', function () {
            var el = document.getElementById('scene').querySelectorAll('a-atom, a-bond');
            for (var i = 0, len = el.length; i < len; i++) {
                el[i].parentNode.removeChild(el[i]);
            }

            mainmenu.setAttribute('visible', true);
            editmenu.setAttribute('visible', false);
            cursor.setAttribute('raycaster', {objects: '.beginbutton'});
        });
    </script>
  </body>
</html>
